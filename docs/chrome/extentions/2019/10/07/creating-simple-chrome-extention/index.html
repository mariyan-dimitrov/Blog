<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Creating a simple chrome extention &#8211; Mariyan Dimitrov</title>
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Personal blog for programming tips and tricks
">
    <meta name="robots" content="all">
    <meta name="author" content="">
    
    <meta name="keywords" content="chrome, extentions">
    <link rel="canonical" href="/blog/chrome/extentions/2019/10/07/creating-simple-chrome-extention/">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed for Mariyan Dimitrov" href="/blog/feed.xml" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/blog/css/pixyll.css?201910142315" type="text/css">

    <!-- Fonts -->
    
    <link href='//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Lato:900,300' rel='stylesheet' type='text/css'>
    
    

    <!-- MathJax -->
    

    <!-- Verifications -->
    
    

    <!-- Open Graph -->
    <!-- From: https://github.com/mmistakes/hpstr-jekyll-theme/blob/master/_includes/head.html -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Creating a simple chrome extention">
    <meta property="og:description" content="Personal blog for programming tips and tricks
">
    <meta property="og:url" content="/chrome/extentions/2019/10/07/creating-simple-chrome-extention/">
    <meta property="og:site_name" content="Mariyan Dimitrov">
    

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary" />
    
    <meta name="twitter:title" content="Creating a simple chrome extention" />
    <meta name="twitter:description" content="Personal blog for programming tips and tricks
" />
    <meta name="twitter:url" content="/chrome/extentions/2019/10/07/creating-simple-chrome-extention/" />
    

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/blog/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/blog/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/blog/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/blog/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/blog/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/blog/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/blog/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/blog/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/blog/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/blog/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/blog/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/blog/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/blog/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/blog/favicon-32x32.png" sizes="32x32">
    <link rel="shortcut icon" href="/blog/favicon.ico">

    
</head>

<body class="site">
  
	

  <div class="site-wrap">
    <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="/blog/" class="site-title">Mariyan Dimitrov</a>
      <nav class="site-nav">
        



    
    
    
    
        <a class="nav-link" href="/blog/about/">About me</a>
    

    

    
    
    
    
        <a class="nav-link" href="/blog/contact/">Say Hello</a>
    

    


      </nav>
      <div class="clearfix"></div>
      
    </div>
  </div>
</header>


    <div class="post p2 p-responsive wrap" role="main">
      <div class="measure">
        


<div class="post-header mb2">
  <h1>Creating a simple chrome extention</h1>
  <span class="post-meta">Oct 7, 2019</span><br>
  
  <span class="post-meta small">
  
    4 minute read
  
  </span>
</div>

<article class="post-content">
  <p>Chrome extentions are very easy ways to manipulate pages the way we want. We can also extent the functonality of a page/s by writing a custom extention that will do the things we need. To start things off, we need to understand how can we setup the baseline of our extention codebase.</p>

<h2 id="chrome-extention-baseline">Chrome Extention baseline</h2>
<p>Let’s say we have a piece of code that needs to be runned in a page, but under an extention. How can we tell the browser that this is an extention and we need to import it. Well, to describe as fully as I can the idea about that I will show mine <a href="https://github.com/mariyan-dimitrov/Cool-Asana-Extention">extention</a> for <a href="https://app.asana.com/">Asana</a>.</p>

<h2 id="file-structure">File structure</h2>

<h3 id="manifestjson---what-does-it-do-and-what-should-we-write-in-it">Manifest.json - what does it do and what should we write in it</h3>

<p>Basically, the manifest.json file is our config file from which the browser loads different permissions and resources. We also point out to the browser what version we are loading, the extension’s name, author and description, which can be viewed from the browser when the extension is loaded properly.</p>

<p>First we need to create a <em>manifest.json</em> file and add these lines of code into it:</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DX Asana Goodies"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mariyan Dimitrov &amp; Martin Spatovaliyski"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Extention for the cool teammates!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"manifest_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"web_accessible_resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"resources/**"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"content_scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"js"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"jQuery.js"</span><span class="p">,</span><span class="w"> </span><span class="s2">"popup.js"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"css"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"style.css"</span><span class="p">],</span><span class="w">
        </span><span class="s2">"matches"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"https://app.asana.com/*"</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">}],</span><span class="w">
    </span><span class="s2">"default_icon"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"16"</span><span class="p">:</span><span class="w"> </span><span class="s2">"img/16.png"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"32"</span><span class="p">:</span><span class="w"> </span><span class="s2">"img/32.png"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"128"</span><span class="p">:</span><span class="w"> </span><span class="s2">"img/128.png"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"icons"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"16"</span><span class="p">:</span><span class="w"> </span><span class="s2">"images/salimeyes16.png"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"32"</span><span class="p">:</span><span class="w"> </span><span class="s2">"images/salimeyes32.png"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"48"</span><span class="p">:</span><span class="w"> </span><span class="s2">"images/salimeyes48.png"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"128"</span><span class="p">:</span><span class="w"> </span><span class="s2">"images/salimeyes128.png"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="importing-extension-icon">Importing extension icon</h3>
<p><strong>default_icon</strong> - this property is responsible for the icon the user sees in his extension toolbar when the estension is active.
<strong>icons</strong> - this is the property responsible for the icon the user sees when he access the <strong>Chrome extentions</strong> page and importing our plugin.</p>

<h3 id="content_scripts---loading-all-assets-in-our-extension">content_scripts - loading all assets in our extension</h3>
<p><strong>js/css</strong> - All styles and scripts that can be included: the order of loading the scripts will be followed by the order of the scripts ( as described, we want jQuery to load first and our custom JavaScript second).
<strong>matches</strong> - For which website should the resources be loaded.</p>

<p>The <strong>content_scripts</strong> will start loading as soon as a match is found from the <strong>matches</strong> array. In our case, this will be loaded only in app.asana.com. One thing to be noted though, the JavaScript files are loaded on <code class="highlighter-rouge">interactive/DOM</code> ready state.</p>

<h3 id="accessible-resources---where-should-we-store-our-mp3-pictures-and-etc">Accessible resources - where should we store our mp3, pictures and etc.</h3>
<p>Sometimes we want our extention to load some pictures, mp3 files or any other type of files. To have access to them, we need to tell the manifest.json file that these files are actually there and can be used. We do that by adding this piece of code in our json file. By using <code class="highlighter-rouge">**</code>, we are currently telling our extension to look for all files in <code class="highlighter-rouge">resources</code> folder recursively.</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"web_accessible_resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"resources/**"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Next step is to use the linked resources and that is done by using the function <code class="highlighter-rouge">chrome.extension.getURL();</code>. In our case we could actually assign the mp3 file into a variable and then use it later on like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">musicURL</span> <span class="o">=</span> <span class="nx">chrome</span><span class="p">.</span><span class="nx">extension</span><span class="p">.</span><span class="nx">getURL</span><span class="p">(</span><span class="s1">'/resources/'</span> <span class="o">+</span> <span class="nx">memeName</span> <span class="o">+</span> <span class="s1">'/music.mp3'</span>  <span class="p">);</span>
<span class="kd">let</span> <span class="nx">music</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Audio</span><span class="p">(</span><span class="nx">musicURL</span><span class="p">);</span>
<span class="nx">music</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="loading-the-created-extension">Loading the created extension</h3>
<p>When we start developing our extension, we need to include it in our browser and see how does it behaves when we are writing lines of code. To do that we need to follow these steps:
1) Open the <strong>Extension Manager</strong> page by going to <strong>chrome://extensions</strong>.</p>
<ul>
  <li>You can also open it by clicking on the Chrome menu, hovering over More Tools then selecting Extensions.</li>
</ul>

<p>2) Enable Developer Mode by clicking the toggle switch next to Developer mode.</p>

<p>3) Click the <code class="highlighter-rouge">Load unpacked</code> button located in the top left corner of our window and select the extension’s folder.</p>

<p>4) Activate yout extension by clicking on the toggle button on the bottom right corner of your extension card.</p>
<h3 id="debugging-the-loaded-extension">Debugging the loaded extension</h3>
<p>When your extension up and running we need to debug it. We need to reload the extension every time when we do a change, speciialy when we change the <strong>manifest.json</strong> file. That way, we are changing how the whole extension should behave and what resources should be loaded within it, that’s why we need to reload it. For easier debugging, Google is thoughfull enough to create an functionality to reload the extension on the go by clicking the circular arrow on the bottom right corner of our extension card in <strong>chrome://extensions</strong>. Many time through our work, we will make mistakes and we need to learn from them. All of the errors (following this implementation) will be logged in the console of your browser. At the sametime however, our Chrome browser will keep a backlog with all errors that were throwed before.</p>

<p>References:</p>
<ul>
  <li>https://developer.chrome.com/extensions/background_pages</li>
</ul>

</article>











      </div>
    </div>
  </div>

  <footer class="center">
  <div class="measure">
    <small>
      Blog writen by Mariyan Dimitrov (<a href="https://www.linkedin.com/in/mariyan-dimitrov-562b21160/">@LinkedIn</a>).<br>
      &lt;/&gt; available on <a href="https://github.com/mariyan-dimitrov/">GitHub</a>.
    </small>
  </div>
</footer>

<script type="text/javascript">
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("/blog/sw.js")
    }
</script>

</body>
</html>
